(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-28c50f77"],{"0bfb":function(t,e,a){"use strict";var l=a("cb7c");t.exports=function(){var t=l(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},"14a0":function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-wrapper"},[a("div",{staticClass:"panel"},[a("div",{staticClass:"panel-heading"},[t._v(t._s(t.pageName))]),a("div",{staticClass:"panel-body"},[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:18}},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"标题名称"}},[a("el-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),a("el-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("类  型")]),a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},t._l(t.typeArray,(function(t,e){return a("el-option",{key:e,staticStyle:{"padding-left":"15px"},attrs:{value:t.value,label:t.label}})})),1),t.industryIf?a("el-select",{staticStyle:{"margin-left":"30px"},attrs:{placeholder:"请选择"},model:{value:t.industryVal,callback:function(e){t.industryVal=e},expression:"industryVal"}},t._l(t.industryArray,(function(t,e){return a("el-option",{key:e,staticStyle:{"padding-left":"15px"},attrs:{value:t.value,label:t.label}})})),1):t._e()],1),a("el-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("说  明")]),a("el-input",{model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),a("el-form-item",{attrs:{label:"跳转链接"}},[a("el-input",{model:{value:t.form.url,callback:function(e){t.$set(t.form,"url",e)},expression:"form.url"}})],1),a("el-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("配  图")]),a("uploadImg",{attrs:{img:this.form.img},on:{url:t.imgUrl}})],1),a("el-form-item",[a("div",[a("button",{staticClass:"suc",class:{jin:t.addBtn},attrs:{type:"button",disabled:t.addBtn},on:{click:function(e){return t.edit(2)}}},[t._v("立即上线")]),a("button",{staticClass:"suc",class:{jin:t.addBtn},staticStyle:{"margin-left":"5px"},attrs:{type:"button",disabled:t.addBtn},on:{click:function(e){return t.edit(1)}}},[t._v("存为草稿")]),a("button",{staticClass:"suc cancel",attrs:{type:"button"},on:{click:t.cancel}},[t._v("取消")])])])],1)],1)],1)],1)])])},i=[],s=[{value:"",label:"请选择"},{value:0,label:"首页banner"},{value:1,label:"找职位banner"},{value:2,label:"找精英banner"},{value:3,label:"行业大图"}],n=[{value:"",label:"请选择"},{value:0,label:"移动互联网"},{value:1,label:"电子商务"},{value:2,label:"企业服务"},{value:3,label:"O2O"},{value:4,label:"教育"},{value:5,label:"金融"},{value:6,label:"游戏"}],o=a("1a19"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("label",{staticClass:"file",attrs:{for:"upfile",type:"button"}},[t._v("选择文件")]),a("input",{staticStyle:{display:"none"},attrs:{id:"upfile",type:"file",accept:"image/*"},domProps:{value:t.removes},on:{change:t.upfileFile}})]),a("div",[a("img",{staticClass:"img-responsive",attrs:{src:t.fileSrc,alt:"图片预览"}})]),a("div",[a("table",{staticClass:"table"},[t._m(0),a("tbody",{directives:[{name:"show",rawName:"v-show",value:t.showTb,expression:"showTb"}]},[a("td",[t._v(t._s(t.imgName))]),a("td",[t._v(t._s(t.fileSize))]),a("td",[a("div",{staticClass:"box"},[a("div",{staticClass:"val",style:{width:t.progressVal+"%"}},[t._v(t._s(t.progressVal)+"%\n                        ")])])]),a("td",[a("i",{directives:[{name:"show",rawName:"v-show",value:t.showG,expression:"showG"}],staticClass:"el-icon-check"})]),a("td",[a("el-button",{staticClass:"el-icon-upload btn",attrs:{type:"success"},on:{click:t.uploadFile}},[t._v("\n                        上传")]),a("el-button",{staticClass:"el-icon-delete btn",attrs:{type:"danger"},on:{click:t.deleteFile}},[t._v("\n                        删除")])],1)])])])])},c=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th",[t._v("图片名")]),a("th",[t._v("文件大小")]),a("th",[t._v("进度")]),a("th",[t._v("操作")]),a("th",[t._v("操作")])])}],u=(a("6b54"),a("7f7f"),{data:function(){return{showTb:!1,fileSrc:"",progressVal:0,imgName:null,fileSize:null,showG:!1,uploadBtn:!1,fileData:{},industryIf:!1,removes:""}},props:["img"],watch:{img:function(t){console.log(t),console.log(this),this.fileSrc=this.img}},created:function(){console.log(this.img)},methods:{upfileFile:function(t){console.log(t),console.log(this.removes);var e=t.target.files[0];console.log(e),this.showTb=!0,this.imgName=e.name,this.showG=!1,this.progressVal=0,this.fileSize=(Math.round(100*e.size/1048576)/100).toString()+"MB";var a=new FileReader;a.readAsDataURL(e);var l=this;a.onload=function(){l.fileSrc=this.result},this.fileData=new FormData,this.fileData.append("file",e),console.log(this.fileData.get("file")),this.$emit("url","")},uploadFile:function(){var t=this;this.uploadBtn=!0;var e={onUploadProgress:function(e){console.log(e),t.progressVal=e.loaded/e.total*100,console.log(t.progressVal)}};o["a"].uploadImg(this.fileData,e).then((function(e){console.log(e),t.$emit("url",e.data.data.url),t.showG=!0})).catch((function(t){console.log(t)}))},deleteFile:function(){this.showG=!1,this.progressVal=0,this.showTb=!1,this.$emit("url",this.fileSrc)}}}),f=u,d=(a("67c4"),a("2877")),p=Object(d["a"])(f,r,c,!1,null,"211288b0",null),h=p.exports,m={components:{uploadImg:h},data:function(){return{pageName:"",form:{title:"",type:"",content:"",url:"",img:"",createAt:""},params:{},industryVal:"",typeArray:[],industryArray:[],query:{},showTb:!1,showG:!1,uploadBtn:!1,imgName:null,fileSize:null,progressVal:0,fileData:{},industryIf:!1}},created:function(){var t=this;this.typeArray=s,this.industryArray=n,console.log(this.$route.query),this.query=this.$route.query,"edit"===this.query.status?(this.pageName="编辑Article",o["a"].getArticle(this.query.id).then((function(e){console.log(e);var a=e.data.data.article;for(var l in a)for(var i in t.form)l===i&&(t.form[i]=a[l]);t.industryVal=a.industry}))):"add"===this.query.status&&(this.pageName="新增Article",delete this.form["createAt"])},computed:{addBtn:function(){for(var t in this.form)if(""===this.form[t]||this.industryIf&&""===this.industryVal)return!0}},watch:{form:{handler:function(t,e){3===t.type?this.industryIf=!0:this.industryIf=!1},deep:!0}},methods:{imgUrl:function(t){this.form.img=t},edit:function(t){var e=this;console.log(this.form);var a={status:t,industry:this.industryVal},l=Object.assign({},a,this.form);"编辑Article"===this.pageName?o["a"].putArticle(this.query.id,l).then((function(t){console.log(t.data.code),0===t.data.code&&(e.$messageBox("编辑成功","success"),e.$router.push("Article"))})).catch((function(t){console.log(t)})):"新增Article"===this.pageName&&o["a"].addArticle(l).then((function(t){console.log(t.data.code),0===t.data.code&&(e.$messageBox("新增成功","success"),e.$router.push("Article"))})).catch((function(t){console.log(t)}))},cancel:function(){this.$router.go(-1)}}},g=m,v=(a("9788"),Object(d["a"])(g,l,i,!1,null,"a9f7fa3a",null));e["default"]=v.exports},"1a19":function(t,e,a){"use strict";var l=a("e443"),i=a("4328"),s=a.n(i);e["a"]={articleList:function(t){return console.log(t),l["a"].get("/api/a/article/search",{params:t})},putStatus:function(t){return l["a"].put("/api/a/u/article/status",s.a.stringify(t))},putArticle:function(t,e){return l["a"].put("/api/a/u/article/".concat(t),s.a.stringify(e))},addArticle:function(t){return l["a"].post("/api/a/u/article",s.a.stringify(t))},deleteArticle:function(t){return l["a"].delete("/api/a/u/article/".concat(t))},getArticle:function(t){return l["a"].get("/api/a/article/".concat(t))},uploadImg:function(t,e){return l["a"].post("/api/a/u/img/task",t,e)}}},3846:function(t,e,a){a("9e1e")&&"g"!=/./g.flags&&a("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:a("0bfb")})},"67c4":function(t,e,a){"use strict";var l=a("6f3e"),i=a.n(l);i.a},"6b54":function(t,e,a){"use strict";a("3846");var l=a("cb7c"),i=a("0bfb"),s=a("9e1e"),n="toString",o=/./[n],r=function(t){a("2aba")(RegExp.prototype,n,t,!0)};a("79e5")((function(){return"/a/b"!=o.call({source:"a",flags:"b"})}))?r((function(){var t=l(this);return"/".concat(t.source,"/","flags"in t?t.flags:!s&&t instanceof RegExp?i.call(t):void 0)})):o.name!=n&&r((function(){return o.call(this)}))},"6f3e":function(t,e,a){},9788:function(t,e,a){"use strict";var l=a("c9e8"),i=a.n(l);i.a},c9e8:function(t,e,a){}}]);
//# sourceMappingURL=chunk-28c50f77.878ad80e.js.map